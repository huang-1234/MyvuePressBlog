# Vue的组件

## 1. createConponent

这里的步骤都代表什么含义呢？

1.Vue.extend()：

1. 调用Vue.extend()创建的是一个组件构造器。 
   通常在创建组件构造器时，传入template代表我们自定义组件的模板。
   该模板就是在使用到组件的地方，要显示的HTML代码。
   事实上，这种写法在Vue2.x的文档中几乎已经看不到了，它会直接使用下面我们会讲到的语法糖，但是在很多资料还是会提到这种方式，而且这种方式是学习后面方式的基础。
2. Vue.component()：
   调用Vue.component()是将刚才的组件构造器注册为一个组件，并且给它起一个组件的标签名称。
   所以需要传递两个参数：1、注册组件的标签名 2、组件构造器
3. 组件必须挂载在某个Vue实例下，否则它不会生效。（见下页）
   我们来看下面我使用了三次`<my-cpn></my-cpn>`
   而第三次其实并没有生效：

## 2. 

## 3. 

## 4.07-组件中的data为什么是函数

1. 组件是一个单独功能模块的封装：
   这个模块有属于自己的HTML模板，也应该有属性自己的数据data。
2. 组件中的数据是保存在哪里呢？顶层的Vue实例中吗？
   我们先来测试一下，组件中能不能直接访问Vue实例中的data

3. 我们发现不能访问，而且即使可以访问，如果将所有的数据都放在Vue实例中，Vue实例就会变的非常臃肿。
4. 结论：Vue组件应该有自己保存数据的地方
5. 为什么data在组件中必须是一个函数呢?
   首先，如果不是一个函数，Vue直接就会报错。
   其次，原因是在于Vue让每个组件对象都返回一个新的对象，因为如果是同一个对象的，组件在多次使用后会相互影响。

代码说明

```html
<!--组件实例对象-->
<div id="app">
  <cpn></cpn>
  <cpn></cpn>
  <cpn></cpn>
</div>

<template id="cpn">
  <div>
    <h2>当前计数: {{counter}}</h2>
    <button @click="increment">+</button>
    <button @click="decrement">-</button>
  </div>
</template>
<script src="../js/vue.js"></script>
<script>
  // 1.注册组件
  const obj = {
    counter: 0
  }
  Vue.component('cpn', {
    template: '#cpn',
    data() {
      // 每次都返回一个新对象
      return {
        counter: 0
      }
    },
    // 每一次返回同一个对象，
    // 这使得所有使用该组件的状态data用的是同一个对象，
    // 意思就是数据同步变化,所以每一个组件都有自己的状态data，
    // 而且必须是一个返回一个对象的函数
/*     data() {
      return obj
    }, */
    methods: {
      increment() {
        this.counter++
      },
      decrement() {
        this.counter--
      }
    }
  })

  const app = new Vue({
    el: '#app',
    data: {
      message: '你好啊'
    }
  })
</script>
```

5. 父子组件的通信：

   在上一个小节中，我们提到了子组件是不能引用父组件或者Vue实例的数据的。
   但是，在开发中，往往一些数据确实需要从上层传递到下层：
   比如在一个页面中，我们从服务器请求到了很多的数据。
   其中一部分数据，并非是我们整个页面的大组件来展示的，而是需要下面的子组件进行展示。
   这个时候，并不会让子组件再次发送一个网络请求，而是直接让大组件(父组件)将数据传递给小组件(子组件)。
   如何进行父子组件间的通信呢？Vue官方提到
   通过props向子组件传递数据
   通过事件向父组件发送消息

6. 6

7. 7

8. 8