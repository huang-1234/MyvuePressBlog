<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web Workers | H先森</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="From FE Arch、To Full Stack">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.e16fe094.css" as="style"><link rel="preload" href="/assets/js/app.f94c0032.js" as="script"><link rel="preload" href="/assets/js/3.cb1bd57e.js" as="script"><link rel="preload" href="/assets/js/1.76b43f87.js" as="script"><link rel="preload" href="/assets/js/469.910c8a4e.js" as="script"><link rel="prefetch" href="/assets/js/10.1fe5866e.js"><link rel="prefetch" href="/assets/js/100.9699457d.js"><link rel="prefetch" href="/assets/js/101.28b47d31.js"><link rel="prefetch" href="/assets/js/102.3e1e5e45.js"><link rel="prefetch" href="/assets/js/103.e161251d.js"><link rel="prefetch" href="/assets/js/104.4dd4a5dd.js"><link rel="prefetch" href="/assets/js/105.606a695a.js"><link rel="prefetch" href="/assets/js/106.3c77106b.js"><link rel="prefetch" href="/assets/js/107.0df344bc.js"><link rel="prefetch" href="/assets/js/108.221daffd.js"><link rel="prefetch" href="/assets/js/109.2065c124.js"><link rel="prefetch" href="/assets/js/11.9d739371.js"><link rel="prefetch" href="/assets/js/110.3729c5b2.js"><link rel="prefetch" href="/assets/js/111.ac30f7aa.js"><link rel="prefetch" href="/assets/js/112.fa1aafd1.js"><link rel="prefetch" href="/assets/js/113.21e2af3f.js"><link rel="prefetch" href="/assets/js/114.609ecc17.js"><link rel="prefetch" href="/assets/js/115.74a5cc6a.js"><link rel="prefetch" href="/assets/js/116.391e0f8d.js"><link rel="prefetch" href="/assets/js/117.46bcecfb.js"><link rel="prefetch" href="/assets/js/118.7ef26559.js"><link rel="prefetch" href="/assets/js/119.7c7e3a33.js"><link rel="prefetch" href="/assets/js/12.bf05782e.js"><link rel="prefetch" href="/assets/js/120.cf60339e.js"><link rel="prefetch" href="/assets/js/121.ed16dad4.js"><link rel="prefetch" href="/assets/js/122.b282e5e0.js"><link rel="prefetch" href="/assets/js/123.b906056a.js"><link rel="prefetch" href="/assets/js/124.849c890a.js"><link rel="prefetch" href="/assets/js/125.f9a970f4.js"><link rel="prefetch" href="/assets/js/126.86a4d740.js"><link rel="prefetch" href="/assets/js/127.1b3da9aa.js"><link rel="prefetch" href="/assets/js/128.7139ec1a.js"><link rel="prefetch" href="/assets/js/129.fb854f9b.js"><link rel="prefetch" href="/assets/js/13.bc5f760f.js"><link rel="prefetch" href="/assets/js/130.a1707177.js"><link rel="prefetch" href="/assets/js/131.f21c5ace.js"><link rel="prefetch" href="/assets/js/132.13e4df13.js"><link rel="prefetch" href="/assets/js/133.730acc3d.js"><link rel="prefetch" href="/assets/js/134.85362bbd.js"><link rel="prefetch" href="/assets/js/135.3fdb2221.js"><link rel="prefetch" href="/assets/js/136.6dd545dd.js"><link rel="prefetch" href="/assets/js/137.1a82009a.js"><link rel="prefetch" href="/assets/js/138.383fe664.js"><link rel="prefetch" href="/assets/js/139.b8361661.js"><link rel="prefetch" href="/assets/js/14.8ebfd10a.js"><link rel="prefetch" href="/assets/js/140.d15e225e.js"><link rel="prefetch" href="/assets/js/141.887874d2.js"><link rel="prefetch" href="/assets/js/142.ca21a3e3.js"><link rel="prefetch" href="/assets/js/143.d99a9be8.js"><link rel="prefetch" href="/assets/js/144.e38c7513.js"><link rel="prefetch" href="/assets/js/145.87ad66e7.js"><link rel="prefetch" href="/assets/js/146.547b8f19.js"><link rel="prefetch" href="/assets/js/147.5584b3dd.js"><link rel="prefetch" href="/assets/js/148.a3e89380.js"><link rel="prefetch" href="/assets/js/149.b825555e.js"><link rel="prefetch" href="/assets/js/15.df27c5a1.js"><link rel="prefetch" href="/assets/js/150.45126c46.js"><link rel="prefetch" href="/assets/js/151.1b9ab70d.js"><link rel="prefetch" href="/assets/js/152.bb3cf0db.js"><link rel="prefetch" href="/assets/js/153.fdef4b0e.js"><link rel="prefetch" href="/assets/js/154.37d32542.js"><link rel="prefetch" href="/assets/js/155.ce795292.js"><link rel="prefetch" href="/assets/js/156.652f0028.js"><link rel="prefetch" href="/assets/js/157.a84da217.js"><link rel="prefetch" href="/assets/js/158.99fa3ab6.js"><link rel="prefetch" href="/assets/js/159.2b121e02.js"><link rel="prefetch" href="/assets/js/16.8d69c3f9.js"><link rel="prefetch" href="/assets/js/160.4f7a6efe.js"><link rel="prefetch" href="/assets/js/161.c84cee5a.js"><link rel="prefetch" href="/assets/js/162.da7e7c49.js"><link rel="prefetch" href="/assets/js/163.c0ad17c0.js"><link rel="prefetch" href="/assets/js/164.75dee78e.js"><link rel="prefetch" href="/assets/js/165.64453a8e.js"><link rel="prefetch" href="/assets/js/166.aa5b1fc2.js"><link rel="prefetch" href="/assets/js/167.4bc881f9.js"><link rel="prefetch" href="/assets/js/168.577cedfa.js"><link rel="prefetch" href="/assets/js/169.6220bf0b.js"><link rel="prefetch" href="/assets/js/17.bf53e77a.js"><link rel="prefetch" href="/assets/js/170.696a7577.js"><link rel="prefetch" href="/assets/js/171.df68bfc5.js"><link rel="prefetch" href="/assets/js/172.8c4f0e72.js"><link rel="prefetch" href="/assets/js/173.5282ce6f.js"><link rel="prefetch" href="/assets/js/174.647f4443.js"><link rel="prefetch" href="/assets/js/175.e610702c.js"><link rel="prefetch" href="/assets/js/176.95aedfe1.js"><link rel="prefetch" href="/assets/js/177.81237042.js"><link rel="prefetch" href="/assets/js/178.e7479fd7.js"><link rel="prefetch" href="/assets/js/179.3f1c1c4d.js"><link rel="prefetch" href="/assets/js/18.95f92415.js"><link rel="prefetch" href="/assets/js/180.ca094fc4.js"><link rel="prefetch" href="/assets/js/181.b1ca84eb.js"><link rel="prefetch" href="/assets/js/182.1cbabedb.js"><link rel="prefetch" href="/assets/js/183.9fb077a7.js"><link rel="prefetch" href="/assets/js/184.4dbd59b3.js"><link rel="prefetch" href="/assets/js/185.5b2371ad.js"><link rel="prefetch" href="/assets/js/186.7899e4ab.js"><link rel="prefetch" href="/assets/js/187.0cca9cdd.js"><link rel="prefetch" href="/assets/js/188.8f77b936.js"><link rel="prefetch" href="/assets/js/189.bcf7bf81.js"><link rel="prefetch" href="/assets/js/19.62ac4b92.js"><link rel="prefetch" href="/assets/js/190.6f7e68e2.js"><link rel="prefetch" href="/assets/js/191.99289852.js"><link rel="prefetch" href="/assets/js/192.70c657c2.js"><link rel="prefetch" href="/assets/js/193.c8aacbf1.js"><link rel="prefetch" href="/assets/js/194.137d0c92.js"><link rel="prefetch" href="/assets/js/195.e624d78c.js"><link rel="prefetch" href="/assets/js/196.d626f365.js"><link rel="prefetch" href="/assets/js/197.418b753e.js"><link rel="prefetch" href="/assets/js/198.b65b9377.js"><link rel="prefetch" href="/assets/js/199.842b20ad.js"><link rel="prefetch" href="/assets/js/20.dc78aaf3.js"><link rel="prefetch" href="/assets/js/200.349f1936.js"><link rel="prefetch" href="/assets/js/201.31f259aa.js"><link rel="prefetch" href="/assets/js/202.c948e103.js"><link rel="prefetch" href="/assets/js/203.67d02833.js"><link rel="prefetch" href="/assets/js/204.703d2fef.js"><link rel="prefetch" href="/assets/js/205.69289460.js"><link rel="prefetch" href="/assets/js/206.a37ba7fa.js"><link rel="prefetch" href="/assets/js/207.ae90d746.js"><link rel="prefetch" href="/assets/js/208.0407e506.js"><link rel="prefetch" href="/assets/js/209.07690c7f.js"><link rel="prefetch" href="/assets/js/21.5a34003b.js"><link rel="prefetch" href="/assets/js/210.c9c78453.js"><link rel="prefetch" href="/assets/js/211.3569265a.js"><link rel="prefetch" href="/assets/js/212.8249229b.js"><link rel="prefetch" href="/assets/js/213.f218266c.js"><link rel="prefetch" href="/assets/js/214.e1f07078.js"><link rel="prefetch" href="/assets/js/215.b6c60e8a.js"><link rel="prefetch" href="/assets/js/216.85a56a56.js"><link rel="prefetch" href="/assets/js/217.63a62f4a.js"><link rel="prefetch" href="/assets/js/218.aee0e064.js"><link rel="prefetch" href="/assets/js/219.6b29d0f7.js"><link rel="prefetch" href="/assets/js/22.771cfbca.js"><link rel="prefetch" href="/assets/js/220.61d4d023.js"><link rel="prefetch" href="/assets/js/221.3ced99d4.js"><link rel="prefetch" href="/assets/js/222.906813b3.js"><link rel="prefetch" href="/assets/js/223.2b833b60.js"><link rel="prefetch" href="/assets/js/224.278e0825.js"><link rel="prefetch" href="/assets/js/225.c5700991.js"><link rel="prefetch" href="/assets/js/226.0d779eb7.js"><link rel="prefetch" href="/assets/js/227.c55da8d9.js"><link rel="prefetch" href="/assets/js/228.11fbecdc.js"><link rel="prefetch" href="/assets/js/229.d7172103.js"><link rel="prefetch" href="/assets/js/23.ce09fe9b.js"><link rel="prefetch" href="/assets/js/230.39abb880.js"><link rel="prefetch" href="/assets/js/231.9f4ad9d5.js"><link rel="prefetch" href="/assets/js/232.f7c0f7e3.js"><link rel="prefetch" href="/assets/js/233.0dc3491d.js"><link rel="prefetch" href="/assets/js/234.cbb271a3.js"><link rel="prefetch" href="/assets/js/235.17f60b7e.js"><link rel="prefetch" href="/assets/js/236.18ef43ad.js"><link rel="prefetch" href="/assets/js/237.8cfb0aae.js"><link rel="prefetch" href="/assets/js/238.a76e001a.js"><link rel="prefetch" href="/assets/js/239.44fcb899.js"><link rel="prefetch" href="/assets/js/24.f7ec3b42.js"><link rel="prefetch" href="/assets/js/240.941f1679.js"><link rel="prefetch" href="/assets/js/241.7cce5e52.js"><link rel="prefetch" href="/assets/js/242.c25056de.js"><link rel="prefetch" href="/assets/js/243.b460937b.js"><link rel="prefetch" href="/assets/js/244.9a594b97.js"><link rel="prefetch" href="/assets/js/245.17f2d7ed.js"><link rel="prefetch" href="/assets/js/246.9ab66ba8.js"><link rel="prefetch" href="/assets/js/247.9876336b.js"><link rel="prefetch" href="/assets/js/248.ff0ca3a7.js"><link rel="prefetch" href="/assets/js/249.d2a7abed.js"><link rel="prefetch" href="/assets/js/25.9d52ce46.js"><link rel="prefetch" href="/assets/js/250.28dc718f.js"><link rel="prefetch" href="/assets/js/251.aa8fd339.js"><link rel="prefetch" href="/assets/js/252.fa3f995a.js"><link rel="prefetch" href="/assets/js/253.0ae8c5dc.js"><link rel="prefetch" href="/assets/js/254.fd19fcda.js"><link rel="prefetch" href="/assets/js/255.d88039fd.js"><link rel="prefetch" href="/assets/js/256.3c4c2006.js"><link rel="prefetch" href="/assets/js/257.7ab2ecf3.js"><link rel="prefetch" href="/assets/js/258.88e989b9.js"><link rel="prefetch" href="/assets/js/259.bdeef70c.js"><link rel="prefetch" href="/assets/js/26.af50071f.js"><link rel="prefetch" href="/assets/js/260.3398eae2.js"><link rel="prefetch" href="/assets/js/261.f88ffb8b.js"><link rel="prefetch" href="/assets/js/262.d163be93.js"><link rel="prefetch" href="/assets/js/263.6c7233c0.js"><link rel="prefetch" href="/assets/js/264.c4d7bce1.js"><link rel="prefetch" href="/assets/js/265.63b79bf7.js"><link rel="prefetch" href="/assets/js/266.01d92adc.js"><link rel="prefetch" href="/assets/js/267.1490e3b5.js"><link rel="prefetch" href="/assets/js/268.684d0c49.js"><link rel="prefetch" href="/assets/js/269.d9920492.js"><link rel="prefetch" href="/assets/js/27.7b11d1c5.js"><link rel="prefetch" href="/assets/js/270.2b53aa58.js"><link rel="prefetch" href="/assets/js/271.55ea5408.js"><link rel="prefetch" href="/assets/js/272.6c4b13cd.js"><link rel="prefetch" href="/assets/js/273.f4fa6d4f.js"><link rel="prefetch" href="/assets/js/274.1daa01f9.js"><link rel="prefetch" href="/assets/js/275.d27b1885.js"><link rel="prefetch" href="/assets/js/276.dd19a27a.js"><link rel="prefetch" href="/assets/js/277.e1c89f3c.js"><link rel="prefetch" href="/assets/js/278.65966000.js"><link rel="prefetch" href="/assets/js/279.30b5b549.js"><link rel="prefetch" href="/assets/js/28.6134fb3a.js"><link rel="prefetch" href="/assets/js/280.fe7bc200.js"><link rel="prefetch" href="/assets/js/281.ee8a8e03.js"><link rel="prefetch" href="/assets/js/282.2a0e875b.js"><link rel="prefetch" href="/assets/js/283.a5908bf5.js"><link rel="prefetch" href="/assets/js/284.ff75aef9.js"><link rel="prefetch" href="/assets/js/285.e1b39a91.js"><link rel="prefetch" href="/assets/js/286.e2a1f415.js"><link rel="prefetch" href="/assets/js/287.73046f06.js"><link rel="prefetch" href="/assets/js/288.7252ceb2.js"><link rel="prefetch" href="/assets/js/289.f07f7443.js"><link rel="prefetch" href="/assets/js/29.57504175.js"><link rel="prefetch" href="/assets/js/290.2edce275.js"><link rel="prefetch" href="/assets/js/291.0e2d6f8f.js"><link rel="prefetch" href="/assets/js/292.839187f7.js"><link rel="prefetch" href="/assets/js/293.172fc312.js"><link rel="prefetch" href="/assets/js/294.31209fd4.js"><link rel="prefetch" href="/assets/js/295.d538e8a8.js"><link rel="prefetch" href="/assets/js/296.c50f1e81.js"><link rel="prefetch" href="/assets/js/297.ac0deb45.js"><link rel="prefetch" href="/assets/js/298.fc3a37ab.js"><link rel="prefetch" href="/assets/js/299.644fc64d.js"><link rel="prefetch" href="/assets/js/30.f92fe035.js"><link rel="prefetch" href="/assets/js/300.f795f717.js"><link rel="prefetch" href="/assets/js/301.ac8f9a06.js"><link rel="prefetch" href="/assets/js/302.8ae9dde7.js"><link rel="prefetch" href="/assets/js/303.9c3f9e8a.js"><link rel="prefetch" href="/assets/js/304.87c205e9.js"><link rel="prefetch" href="/assets/js/305.a6036d6b.js"><link rel="prefetch" href="/assets/js/306.46e306eb.js"><link rel="prefetch" href="/assets/js/307.745eeb6d.js"><link rel="prefetch" href="/assets/js/308.50394171.js"><link rel="prefetch" href="/assets/js/309.3dddf92d.js"><link rel="prefetch" href="/assets/js/31.c8b48500.js"><link rel="prefetch" href="/assets/js/310.47c30c9a.js"><link rel="prefetch" href="/assets/js/311.b4fd67fb.js"><link rel="prefetch" href="/assets/js/312.6ffa80eb.js"><link rel="prefetch" href="/assets/js/313.c358af7c.js"><link rel="prefetch" href="/assets/js/314.afc80794.js"><link rel="prefetch" href="/assets/js/315.45c672e7.js"><link rel="prefetch" href="/assets/js/316.5c523322.js"><link rel="prefetch" href="/assets/js/317.bd4b52ea.js"><link rel="prefetch" href="/assets/js/318.a61374ac.js"><link rel="prefetch" href="/assets/js/319.090adb1a.js"><link rel="prefetch" href="/assets/js/32.4b09e377.js"><link rel="prefetch" href="/assets/js/320.99eede35.js"><link rel="prefetch" href="/assets/js/321.43f17dfc.js"><link rel="prefetch" href="/assets/js/322.7bbfc448.js"><link rel="prefetch" href="/assets/js/323.f33829a2.js"><link rel="prefetch" href="/assets/js/324.7b0a0a7e.js"><link rel="prefetch" href="/assets/js/325.a19e4d98.js"><link rel="prefetch" href="/assets/js/326.4f608298.js"><link rel="prefetch" href="/assets/js/327.219a9158.js"><link rel="prefetch" href="/assets/js/328.c9924a8d.js"><link rel="prefetch" href="/assets/js/329.e4042c67.js"><link rel="prefetch" href="/assets/js/33.a769e7fb.js"><link rel="prefetch" href="/assets/js/330.96395ae3.js"><link rel="prefetch" href="/assets/js/331.fff41e05.js"><link rel="prefetch" href="/assets/js/332.ce6df305.js"><link rel="prefetch" href="/assets/js/333.5335ab7d.js"><link rel="prefetch" href="/assets/js/334.5163e356.js"><link rel="prefetch" href="/assets/js/335.702876be.js"><link rel="prefetch" href="/assets/js/336.6f5f9da8.js"><link rel="prefetch" href="/assets/js/337.41d8745e.js"><link rel="prefetch" href="/assets/js/338.75e17e57.js"><link rel="prefetch" href="/assets/js/339.d36b9f3a.js"><link rel="prefetch" href="/assets/js/34.d52f0ad0.js"><link rel="prefetch" href="/assets/js/340.0a59a573.js"><link rel="prefetch" href="/assets/js/341.6bde4d83.js"><link rel="prefetch" href="/assets/js/342.8845cd65.js"><link rel="prefetch" href="/assets/js/343.61aa36ef.js"><link rel="prefetch" href="/assets/js/344.5e2bd145.js"><link rel="prefetch" href="/assets/js/345.856f0641.js"><link rel="prefetch" href="/assets/js/346.443c5592.js"><link rel="prefetch" href="/assets/js/347.4836acaf.js"><link rel="prefetch" href="/assets/js/348.57dcb7e6.js"><link rel="prefetch" href="/assets/js/349.73e89800.js"><link rel="prefetch" href="/assets/js/35.83abf170.js"><link rel="prefetch" href="/assets/js/350.925c60a9.js"><link rel="prefetch" href="/assets/js/351.0d048c7e.js"><link rel="prefetch" href="/assets/js/352.6843dfb3.js"><link rel="prefetch" href="/assets/js/353.70f1fc55.js"><link rel="prefetch" href="/assets/js/354.4e11f12b.js"><link rel="prefetch" href="/assets/js/355.83305d02.js"><link rel="prefetch" href="/assets/js/356.68a12736.js"><link rel="prefetch" href="/assets/js/357.f3aece4f.js"><link rel="prefetch" href="/assets/js/358.f3d66952.js"><link rel="prefetch" href="/assets/js/359.ddcfe1dd.js"><link rel="prefetch" href="/assets/js/36.8c2d8e9b.js"><link rel="prefetch" href="/assets/js/360.edc8cdd2.js"><link rel="prefetch" href="/assets/js/361.5d36a4e1.js"><link rel="prefetch" href="/assets/js/362.ea32d949.js"><link rel="prefetch" href="/assets/js/363.0adbd120.js"><link rel="prefetch" href="/assets/js/364.627d2c33.js"><link rel="prefetch" href="/assets/js/365.8cec2867.js"><link rel="prefetch" href="/assets/js/366.3968161a.js"><link rel="prefetch" href="/assets/js/367.92d1ae35.js"><link rel="prefetch" href="/assets/js/368.af662fcf.js"><link rel="prefetch" href="/assets/js/369.89b3aa9e.js"><link rel="prefetch" href="/assets/js/37.a48b8356.js"><link rel="prefetch" href="/assets/js/370.02ae0f22.js"><link rel="prefetch" href="/assets/js/371.c03ef902.js"><link rel="prefetch" href="/assets/js/372.a6ec0d91.js"><link rel="prefetch" href="/assets/js/373.91b5b516.js"><link rel="prefetch" href="/assets/js/374.45d40535.js"><link rel="prefetch" href="/assets/js/375.34b66c1d.js"><link rel="prefetch" href="/assets/js/376.c32f904b.js"><link rel="prefetch" href="/assets/js/377.1d97e041.js"><link rel="prefetch" href="/assets/js/378.8cdf4d17.js"><link rel="prefetch" href="/assets/js/379.37eaa716.js"><link rel="prefetch" href="/assets/js/38.4a8cd1e9.js"><link rel="prefetch" href="/assets/js/380.56c72914.js"><link rel="prefetch" href="/assets/js/381.ba71564a.js"><link rel="prefetch" href="/assets/js/382.31b20e3e.js"><link rel="prefetch" href="/assets/js/383.7f0cda55.js"><link rel="prefetch" href="/assets/js/384.d87391da.js"><link rel="prefetch" href="/assets/js/385.6e832244.js"><link rel="prefetch" href="/assets/js/386.bdbb070b.js"><link rel="prefetch" href="/assets/js/387.1db37937.js"><link rel="prefetch" href="/assets/js/388.bb1a8047.js"><link rel="prefetch" href="/assets/js/389.d1d86e1f.js"><link rel="prefetch" href="/assets/js/39.5958e056.js"><link rel="prefetch" href="/assets/js/390.4632f4cf.js"><link rel="prefetch" href="/assets/js/391.5d8dbe7d.js"><link rel="prefetch" href="/assets/js/392.4550e0af.js"><link rel="prefetch" href="/assets/js/393.221d1a23.js"><link rel="prefetch" href="/assets/js/394.d5d631e0.js"><link rel="prefetch" href="/assets/js/395.9b92227b.js"><link rel="prefetch" href="/assets/js/396.ff6a4433.js"><link rel="prefetch" href="/assets/js/397.5b07954d.js"><link rel="prefetch" href="/assets/js/398.27cb434a.js"><link rel="prefetch" href="/assets/js/399.d0d57f6c.js"><link rel="prefetch" href="/assets/js/4.7bf9b271.js"><link rel="prefetch" href="/assets/js/40.9a131df4.js"><link rel="prefetch" href="/assets/js/400.1410c4e2.js"><link rel="prefetch" href="/assets/js/401.d2641256.js"><link rel="prefetch" href="/assets/js/402.ddd01097.js"><link rel="prefetch" href="/assets/js/403.5e2e71c1.js"><link rel="prefetch" href="/assets/js/404.ecafdd4c.js"><link rel="prefetch" href="/assets/js/405.ef148f0a.js"><link rel="prefetch" href="/assets/js/406.1a6b779c.js"><link rel="prefetch" href="/assets/js/407.fc1d7d61.js"><link rel="prefetch" href="/assets/js/408.e19fae69.js"><link rel="prefetch" href="/assets/js/409.33e806eb.js"><link rel="prefetch" href="/assets/js/41.253a1788.js"><link rel="prefetch" href="/assets/js/410.9e4770b7.js"><link rel="prefetch" href="/assets/js/411.8dafc8c9.js"><link rel="prefetch" href="/assets/js/412.c5b343eb.js"><link rel="prefetch" href="/assets/js/413.c59be390.js"><link rel="prefetch" href="/assets/js/414.33b9da54.js"><link rel="prefetch" href="/assets/js/415.6571dd66.js"><link rel="prefetch" href="/assets/js/416.25494945.js"><link rel="prefetch" href="/assets/js/417.e1a29065.js"><link rel="prefetch" href="/assets/js/418.e88eda23.js"><link rel="prefetch" href="/assets/js/419.0445a68f.js"><link rel="prefetch" href="/assets/js/42.20369023.js"><link rel="prefetch" href="/assets/js/420.776f06e3.js"><link rel="prefetch" href="/assets/js/421.1795b045.js"><link rel="prefetch" href="/assets/js/422.8762d9c2.js"><link rel="prefetch" href="/assets/js/423.d63a2e28.js"><link rel="prefetch" href="/assets/js/424.86ee0fcf.js"><link rel="prefetch" href="/assets/js/425.516a23e1.js"><link rel="prefetch" href="/assets/js/426.ed0f978b.js"><link rel="prefetch" href="/assets/js/427.d8bf1eab.js"><link rel="prefetch" href="/assets/js/428.357048e0.js"><link rel="prefetch" href="/assets/js/429.14d9064c.js"><link rel="prefetch" href="/assets/js/43.fac05c68.js"><link rel="prefetch" href="/assets/js/430.1843c1a4.js"><link rel="prefetch" href="/assets/js/431.7e6c1543.js"><link rel="prefetch" href="/assets/js/432.f16f1076.js"><link rel="prefetch" href="/assets/js/433.dd91e942.js"><link rel="prefetch" href="/assets/js/434.695f03f9.js"><link rel="prefetch" href="/assets/js/435.a00217a6.js"><link rel="prefetch" href="/assets/js/436.8f2fa62d.js"><link rel="prefetch" href="/assets/js/437.a5c5c74d.js"><link rel="prefetch" href="/assets/js/438.257c846e.js"><link rel="prefetch" href="/assets/js/439.0de2221d.js"><link rel="prefetch" href="/assets/js/44.5bdb5f83.js"><link rel="prefetch" href="/assets/js/440.79aaa9a8.js"><link rel="prefetch" href="/assets/js/441.ccf80c59.js"><link rel="prefetch" href="/assets/js/442.92459606.js"><link rel="prefetch" href="/assets/js/443.b731a0fd.js"><link rel="prefetch" href="/assets/js/444.a334b9ec.js"><link rel="prefetch" href="/assets/js/445.4e1907e3.js"><link rel="prefetch" href="/assets/js/446.d75be425.js"><link rel="prefetch" href="/assets/js/447.870554ea.js"><link rel="prefetch" href="/assets/js/448.903fc0b0.js"><link rel="prefetch" href="/assets/js/449.260f5efd.js"><link rel="prefetch" href="/assets/js/45.a4f663f3.js"><link rel="prefetch" href="/assets/js/450.1e9eda85.js"><link rel="prefetch" href="/assets/js/451.6fbe069e.js"><link rel="prefetch" href="/assets/js/452.a3d3fa41.js"><link rel="prefetch" href="/assets/js/453.d0648fee.js"><link rel="prefetch" href="/assets/js/454.914b50b1.js"><link rel="prefetch" href="/assets/js/455.69f63386.js"><link rel="prefetch" href="/assets/js/456.ec7811bd.js"><link rel="prefetch" href="/assets/js/457.51e109db.js"><link rel="prefetch" href="/assets/js/458.08a10f8c.js"><link rel="prefetch" href="/assets/js/459.5c5a9e67.js"><link rel="prefetch" href="/assets/js/46.a1176cfc.js"><link rel="prefetch" href="/assets/js/460.e37cbe50.js"><link rel="prefetch" href="/assets/js/461.b788e402.js"><link rel="prefetch" href="/assets/js/462.55b49535.js"><link rel="prefetch" href="/assets/js/463.c4b79b2f.js"><link rel="prefetch" href="/assets/js/464.dd51b703.js"><link rel="prefetch" href="/assets/js/465.d525d60f.js"><link rel="prefetch" href="/assets/js/466.9fb338d6.js"><link rel="prefetch" href="/assets/js/467.c666507a.js"><link rel="prefetch" href="/assets/js/468.05e343d7.js"><link rel="prefetch" href="/assets/js/47.a3214ad7.js"><link rel="prefetch" href="/assets/js/470.76b3df71.js"><link rel="prefetch" href="/assets/js/471.aed96018.js"><link rel="prefetch" href="/assets/js/472.a47f5891.js"><link rel="prefetch" href="/assets/js/473.ee48f596.js"><link rel="prefetch" href="/assets/js/474.6a93ec7d.js"><link rel="prefetch" href="/assets/js/475.e16c7c09.js"><link rel="prefetch" href="/assets/js/48.814ad674.js"><link rel="prefetch" href="/assets/js/49.1edf7fd0.js"><link rel="prefetch" href="/assets/js/5.f24ed8e2.js"><link rel="prefetch" href="/assets/js/50.ff20eeb0.js"><link rel="prefetch" href="/assets/js/51.5cce2ed2.js"><link rel="prefetch" href="/assets/js/52.b58fd3e2.js"><link rel="prefetch" href="/assets/js/53.1ef20344.js"><link rel="prefetch" href="/assets/js/54.1d881dec.js"><link rel="prefetch" href="/assets/js/55.4053ca0f.js"><link rel="prefetch" href="/assets/js/56.92b9c070.js"><link rel="prefetch" href="/assets/js/57.c989ac75.js"><link rel="prefetch" href="/assets/js/58.7b5990e0.js"><link rel="prefetch" href="/assets/js/59.f4f62ff4.js"><link rel="prefetch" href="/assets/js/6.806bb5df.js"><link rel="prefetch" href="/assets/js/60.01c0ba25.js"><link rel="prefetch" href="/assets/js/61.39846255.js"><link rel="prefetch" href="/assets/js/62.8e2d34bc.js"><link rel="prefetch" href="/assets/js/63.e7084f9e.js"><link rel="prefetch" href="/assets/js/64.182ccc82.js"><link rel="prefetch" href="/assets/js/65.fdb0fb27.js"><link rel="prefetch" href="/assets/js/66.c0c8de77.js"><link rel="prefetch" href="/assets/js/67.4ce12d12.js"><link rel="prefetch" href="/assets/js/68.b46c0992.js"><link rel="prefetch" href="/assets/js/69.2d9495f3.js"><link rel="prefetch" href="/assets/js/7.079dae5b.js"><link rel="prefetch" href="/assets/js/70.7df43142.js"><link rel="prefetch" href="/assets/js/71.72b7332d.js"><link rel="prefetch" href="/assets/js/72.c691d1d0.js"><link rel="prefetch" href="/assets/js/73.f0a188c1.js"><link rel="prefetch" href="/assets/js/74.c38a11ba.js"><link rel="prefetch" href="/assets/js/75.0aab839c.js"><link rel="prefetch" href="/assets/js/76.f185f42f.js"><link rel="prefetch" href="/assets/js/77.1d3a75a8.js"><link rel="prefetch" href="/assets/js/78.928229ce.js"><link rel="prefetch" href="/assets/js/79.eb868248.js"><link rel="prefetch" href="/assets/js/8.44bf364c.js"><link rel="prefetch" href="/assets/js/80.0bd68717.js"><link rel="prefetch" href="/assets/js/81.8b8b8f2c.js"><link rel="prefetch" href="/assets/js/82.3eb14cd4.js"><link rel="prefetch" href="/assets/js/83.1506a9e0.js"><link rel="prefetch" href="/assets/js/84.86eb3c77.js"><link rel="prefetch" href="/assets/js/85.47e55e83.js"><link rel="prefetch" href="/assets/js/86.ffeb2112.js"><link rel="prefetch" href="/assets/js/87.28114f98.js"><link rel="prefetch" href="/assets/js/88.50b8a6e3.js"><link rel="prefetch" href="/assets/js/89.5dceff1c.js"><link rel="prefetch" href="/assets/js/9.e08a8831.js"><link rel="prefetch" href="/assets/js/90.fdd70aea.js"><link rel="prefetch" href="/assets/js/91.6c50c80e.js"><link rel="prefetch" href="/assets/js/92.e0c83a6b.js"><link rel="prefetch" href="/assets/js/93.0cfd9dd9.js"><link rel="prefetch" href="/assets/js/94.398c3cd0.js"><link rel="prefetch" href="/assets/js/95.18d6669e.js"><link rel="prefetch" href="/assets/js/96.cb1b1690.js"><link rel="prefetch" href="/assets/js/97.6925e5e7.js"><link rel="prefetch" href="/assets/js/98.36e9ee4d.js"><link rel="prefetch" href="/assets/js/99.22a72ff5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e16fe094.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>H先森</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>From FE Arch、To Full Stack</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>huangsq</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/me.jpg" alt="H先森" class="logo"> <span class="site-name">H先森</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      FE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/" class="nav-link"><i class="undefined"></i>
  JS
</a></li><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/Styles/" class="nav-link"><i class="undefined"></i>
  Styles
</a></li><li class="dropdown-item"><!----> <a href="/TS/" class="nav-link"><i class="undefined"></i>
  TS
</a></li><li class="dropdown-item"><h4>Browser</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BrowserCore/" class="nav-link"><i class="undefined"></i>
  BrCore(MP)
</a></li><li class="dropdown-subitem"><a href="/BrowserModel/" class="nav-link"><i class="undefined"></i>
  BrModel(MT)
</a></li></ul></li><li class="dropdown-item"><h4>Web</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/WebAPI/" class="nav-link router-link-active"><i class="undefined"></i>
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/WebStandard/" class="nav-link"><i class="undefined"></i>
  WebStandard
</a></li></ul></li><li class="dropdown-item"><h4>JQuery</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JQuery/" class="nav-link"><i class="undefined"></i>
  JQueryBase
</a></li></ul></li><li class="dropdown-item"><h4>Angular</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Angular/" class="nav-link"><i class="undefined"></i>
  AngularBase
</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/React/" class="nav-link"><i class="undefined"></i>
  ReactBase
</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/" class="nav-link"><i class="undefined"></i>
  VueBase
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      BE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Nodejs</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BE/" class="nav-link"><i class="undefined"></i>
  NodeBase
</a></li></ul></li><li class="dropdown-item"><h4>cPlus</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Cplus/" class="nav-link"><i class="undefined"></i>
  cPlus
</a></li></ul></li><li class="dropdown-item"><h4>Go</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Proj
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Project/" class="nav-link"><i class="undefined"></i>
  Project
</a></li><li class="dropdown-item"><h4>toolsForProject</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Tools/" class="nav-link"><i class="undefined"></i>
  Git&amp;webpack
</a></li></ul></li><li class="dropdown-item"><h4>other-ology</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/OtherOlogy/" class="nav-link"><i class="undefined"></i>
  English
</a></li></ul></li><li class="dropdown-item"><h4>W</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Interface/" class="nav-link"><i class="undefined"></i>
  interfaceEx
</a></li></ul></li><li class="dropdown-item"><h4>AI</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/AlgorithmAI/" class="nav-link"><i class="undefined"></i>
  AI
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      csBase
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSBase/" class="nav-link"><i class="undefined"></i>
  CSBase
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/me.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    huangsq
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>441</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      FE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/" class="nav-link"><i class="undefined"></i>
  JS
</a></li><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/Styles/" class="nav-link"><i class="undefined"></i>
  Styles
</a></li><li class="dropdown-item"><!----> <a href="/TS/" class="nav-link"><i class="undefined"></i>
  TS
</a></li><li class="dropdown-item"><h4>Browser</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BrowserCore/" class="nav-link"><i class="undefined"></i>
  BrCore(MP)
</a></li><li class="dropdown-subitem"><a href="/BrowserModel/" class="nav-link"><i class="undefined"></i>
  BrModel(MT)
</a></li></ul></li><li class="dropdown-item"><h4>Web</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/WebAPI/" class="nav-link router-link-active"><i class="undefined"></i>
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/WebStandard/" class="nav-link"><i class="undefined"></i>
  WebStandard
</a></li></ul></li><li class="dropdown-item"><h4>JQuery</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JQuery/" class="nav-link"><i class="undefined"></i>
  JQueryBase
</a></li></ul></li><li class="dropdown-item"><h4>Angular</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Angular/" class="nav-link"><i class="undefined"></i>
  AngularBase
</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/React/" class="nav-link"><i class="undefined"></i>
  ReactBase
</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/" class="nav-link"><i class="undefined"></i>
  VueBase
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      BE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Nodejs</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BE/" class="nav-link"><i class="undefined"></i>
  NodeBase
</a></li></ul></li><li class="dropdown-item"><h4>cPlus</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Cplus/" class="nav-link"><i class="undefined"></i>
  cPlus
</a></li></ul></li><li class="dropdown-item"><h4>Go</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Proj
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Project/" class="nav-link"><i class="undefined"></i>
  Project
</a></li><li class="dropdown-item"><h4>toolsForProject</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Tools/" class="nav-link"><i class="undefined"></i>
  Git&amp;webpack
</a></li></ul></li><li class="dropdown-item"><h4>other-ology</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/OtherOlogy/" class="nav-link"><i class="undefined"></i>
  English
</a></li></ul></li><li class="dropdown-item"><h4>W</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Interface/" class="nav-link"><i class="undefined"></i>
  interfaceEx
</a></li></ul></li><li class="dropdown-item"><h4>AI</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/AlgorithmAI/" class="nav-link"><i class="undefined"></i>
  AI
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      csBase
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSBase/" class="nav-link"><i class="undefined"></i>
  CSBase
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>WebAPI</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WebAPI/Node/Node.html" class="sidebar-link">WebAPI-Node接口</a></li><li><a href="/WebAPI/Worker/postMessage.html" aria-current="page" class="active sidebar-link">Web Workers</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>huangsq</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Web Workers</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>huangsq</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="web-workers"><a href="#web-workers" class="header-anchor">#</a> Web Workers</h1> <h2 id="问题-javascript-并行性"><a href="#问题-javascript-并行性" class="header-anchor">#</a> 问题：JavaScript 并行性</h2> <p>要将有趣的应用（例如从侧重服务器端的实施）移植到客户端 JavaScript，存在很多制约瓶颈。其中包括浏览器兼容性、静态类型、可访问性和性能。幸运的是，随着浏览器供应商快速提高 JavaScript 引擎的速度，性能已不再是瓶颈。</p> <p>仍在阻碍 JavaScript 的实际上是语言本身。JavaScript 属于单线程环境，也就是说无法同时运行多个脚本。例如，假设有一个网站，它需要处理 UI 事件，查询并处理大量 API 数据以及操作 DOM。这很常见，不是吗？遗憾的是，由于受到浏览器 JavaScript 运行时的限制，所有这些操作都无法同时进行。脚本是在单个线程中执行的。</p> <p>开发人员会使用 <code>setTimeout()</code>、<code>setInterval()</code>、<code>XMLHttpRequest</code> 和事件处理程序等技术模拟“并行”。所有这些功能确实都是异步运行的，但没有阻碍未必就意味着并行。系统会在生成当前执行脚本后处理异步事件。好消息是，HTML5 为我们提供了优于这些技巧的技术。</p> <h2 id="web-worker-简介-为-javascript-引入线程技术"><a href="#web-worker-简介-为-javascript-引入线程技术" class="header-anchor">#</a> Web Worker 简介：为 JavaScript 引入线程技术</h2> <p><a href="http://www.whatwg.org/specs/web-workers/current-work/" target="_blank" rel="noopener noreferrer">Web Worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 规范定义了在网络应用中生成背景脚本的 API。您可以通过 Web Worker 执行一些操作，例如触发长时间运行的脚本以处理计算密集型任务，同时却不会阻碍 UI 或其他脚本处理用户互动。这有助于解决令人讨厌的“无响应脚本”对话框（大家都有些爱上它了吧）问题：</p> <p>Worker 利用类似线程的消息传递实现并行。这非常适合您确保对 UI 的刷新、性能以及对用户的响应。</p> <h3 id="web-worker-的类型"><a href="#web-worker-的类型" class="header-anchor">#</a> Web Worker 的类型</h3> <p>值得注意的是，<a href="http://www.whatwg.org/specs/web-workers/current-work/" target="_blank" rel="noopener noreferrer">规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中介绍了两种 Web Worker：<a href="http://www.whatwg.org/specs/web-workers/current-work/#dedicated-workers-and-the-worker-interface" target="_blank" rel="noopener noreferrer">专用 Worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 [共用 Worker](http://www.whatwg.org/ pecs/web-workers/current-work/#sharedworker)。本文只涉及专用 Worker，并在全文中将其称为“Web Worker”或“Worker”。</p> <h2 id="使用入门"><a href="#使用入门" class="header-anchor">#</a> 使用入门</h2> <p>Web Worker 在独立线程中运行。因此，它们执行的代码需要保存在一个单独的文件中。但在保存代码前，我们要先在您的主网页上创建新的 <code>Worker</code> 对象。构造函数采用 Worker 脚本的名称：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'task.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果指定的异步下载文件存在，浏览器就会生成新的 Worker 线程。在完全下载并执行文件之前，系统不会生成 Worker。如果指向您 Worker 的路径返回 404，Worker 就会在不显示任何提示的情况下失败。</p> <p>创建 Worker 之后，通过调用 <code>postMessage()</code> 方法启动：</p> <div class="language-js extra-class"><pre class="language-js"><code>worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Start the worker.</span>
</code></pre></div><h3 id="通过消息传递与-worker-通信"><a href="#通过消息传递与-worker-通信" class="header-anchor">#</a> 通过消息传递与 Worker 通信</h3> <p>Worker 与其父网页之间的通信是通过事件模型和 <code>postMessage()</code> 方法实现的。<code>postMessage()</code> 可以接受字符串或 JSON 对象作为单个参数，具体取决于您的浏览器/版本。新式浏览器的最新版支持传递 JSON 对象。</p> <p>以下示例使用字符串将“Hello World”传递给了 doWork.js 中的 Worker。Worker 直接返回了传递给它的消息。</p> <p>主脚本：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'doWork.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Worker said: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Send data to our worker.</span>
</code></pre></div><p>doWork.js (Worker)：</p> <div class="language-js extra-class"><pre class="language-js"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在主网页中调用 <code>postMessage()</code> 时，我们的 Worker 通过定义 <code>message</code> 事件的 <code>onmessage</code> 处理程序来处理消息。您可以在 <code>Event.data</code> 中访问消息有效负载（此示例中为“Hello World”）。虽然这个特殊的示例并不精彩，但它说明 <code>postMessage()</code> 也是您将数据传回主线程的一种方法。很方便！</p> <p>在主网页和 Worker 之间传递的消息是复制而不是共享的。例如，下一示例中 JSON 消息的“msg”属性在两个位置中均可访问。即使对象运行在单独的专用空间中，系统似乎也会将其直接传递给 Worker。实际发生的情况是，系统将对象传递给 Worker 后，会将其序列化，随后在另一端解取消序列化。由于网页和 Worker 并不共享同一实例，因此每次传递时都要进行复制。大部分浏览器通过在任一端上对值进行自动 JSON 编码/解码来实施此功能。</p> <p>下面是一个使用 JSON 对象传递消息的更复杂的示例。</p> <p>主脚本：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sayHI()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Say HI<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>unknownCmd()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Send unknown command<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stop()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Stop worker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>output</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>output</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">sayHI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'cmd'</span><span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token operator">:</span> <span class="token string">'Hi'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Calling worker.terminate() from this script would also stop the worker.</span>
    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'cmd'</span><span class="token operator">:</span> <span class="token string">'stop'</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token operator">:</span> <span class="token string">'Bye'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unknownCmd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'cmd'</span><span class="token operator">:</span> <span class="token string">'foobard'</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token operator">:</span> <span class="token string">'???'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'doWork2.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>doWork2.js：</p> <div class="language-js extra-class"><pre class="language-js"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>cmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'start'</span><span class="token operator">:</span>
      self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'WORKER STARTED: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'stop'</span><span class="token operator">:</span>
      self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'WORKER STOPPED: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">'. (buttons will no longer work)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      self<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Terminates the worker.</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Unknown command: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>请注意</strong>：停止 Worker 的方法有两种：在主网页中调用 <code>worker terminate()</code>，或在 Worker 本身内部调用 <code>self.close()</code>。</p> <h2 id="worker-环境"><a href="#worker-环境" class="header-anchor">#</a> Worker 环境</h2> <h3 id="worker-作用域"><a href="#worker-作用域" class="header-anchor">#</a> Worker 作用域</h3> <p>就 Worker 来说，<code>self</code> 和 <code>this</code> 指的都是 Worker 的全局作用域。因此，上一示例也可以写成：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>cmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'start'</span><span class="token operator">:</span>
      <span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'WORKER STARTED: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'stop'</span><span class="token operator">:</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>或者，您可以直接设置 <code>onmessage</code> 事件处理程序（虽然 JavaScript 高手们总是会推荐 <code>addEventListener</code>）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="适用于-worker-的功能"><a href="#适用于-worker-的功能" class="header-anchor">#</a> 适用于 Worker 的功能</h3> <p>由于 Web Worker 的多线程行为，所以它们只能使用 JavaScript 功能的子集：</p> <ul><li><code>navigator</code> 对象</li> <li><code>location</code> 对象（只读）</li> <li><code>XMLHttpRequest</code></li> <li><code>setTimeout()/clearTimeout()</code> 和 <code>setInterval()/clearInterval()</code></li> <li><a href="https://www.html5rocks.com/tutorials/appcache/beginner/" target="_blank" rel="noopener noreferrer">应用缓存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>使用 <code>importScripts()</code> 方法导入外部脚本</li> <li><a href="https://www.html5rocks.com/zh/tutorials/workers/basics/#toc-enviornment-subworkers" target="_blank" rel="noopener noreferrer">生成其他 Web Worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Worker 无法使用：</p> <ul><li>DOM（非线程安全）</li> <li><code>window</code> 对象</li> <li><code>document</code> 对象</li> <li><code>parent</code> 对象</li></ul> <h3 id="加载外部脚本"><a href="#加载外部脚本" class="header-anchor">#</a> 加载外部脚本</h3> <p>您可以通过 <code>importScripts()</code> 函数将外部脚本文件或库加载到 Worker 中。该方法采用零个或多个字符串表示要导入的资源的文件名。</p> <p>此示例将 <code>script1.js</code> 和 <code>script2.js</code> 加载到了 Worker 中：</p> <p>worker.js：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'script1.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'script2.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以写成单个导入语句：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'script1.js'</span><span class="token punctuation">,</span> <span class="token string">'script2.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="子-worker"><a href="#子-worker" class="header-anchor">#</a> 子 Worker</h3> <p>Worker 可以生成子 Worker。这对于在运行时进一步拆分大任务来说非常重要。但是，子 Worker 还有几点注意事项：</p> <ul><li>子 Worker 必须托管在与父网页相同的来源中。</li> <li>子 Worker 中的 URI 应相对于父 Worker 的位置进行解析（与主网页不同）。</li></ul> <p>请注意，大部分浏览器会为每个 Worker 生成单独的进程。在您开始生成 Worker 场之前，请注意不要占用太多的用户系统资源。这样做的一个原因是，在主网页和 Worker 之间传递的消息是复制而不是共享的。请参阅<a href="https://www.html5rocks.com/zh/tutorials/workers/basics/#toc-gettingstarted-workercomm" target="_blank" rel="noopener noreferrer">通过消息传递与 Worker 通信<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>有关子 Worker 生成方法的示例，请参阅规范中的<a href="http://www.whatwg.org/specs/web-workers/current-work/#delegation" target="_blank" rel="noopener noreferrer">相关示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="内嵌-worker"><a href="#内嵌-worker" class="header-anchor">#</a> 内嵌 Worker</h2> <p>如果您想即时创建 Worker 脚本，或者在不创建单独 Worker 文件的情况下创建独立网页，那该怎么做呢？在新 <a href="http://dev.w3.org/2009/dap/file-system/file-writer.html#the-blobbuilder-interface" target="_blank" rel="noopener noreferrer"><code>BlobBuilder</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 界面中，您可以创建 <code>BlobBuilder</code> 并以字符串形式附上 Worker 代码，从而在与主逻辑相同的 HTML 文件中“内嵌”Worker：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Prefixed in Webkit, Chrome 12, and FF6: window.WebKitBlobBuilder, window.MozBlobBuilder</span>
<span class="token keyword">var</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlobBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;onmessage = function(e) { postMessage('msg from worker'); }&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Obtain a blob URL reference to our worker 'file'.</span>
<span class="token comment">// Note: window.webkitURL.createObjectURL() in Chrome 10+.</span>
<span class="token keyword">var</span> blobURL <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>bb<span class="token punctuation">.</span><span class="token function">getBlob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>blobURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e.data == 'msg from worker'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Start the worker.</span>
</code></pre></div><h3 id="blob-网址"><a href="#blob-网址" class="header-anchor">#</a> Blob 网址</h3> <p>对 <a href="http://dev.w3.org/2006/webapi/FileAPI/#dfn-createObjectURL" target="_blank" rel="noopener noreferrer"><code>window.URL.createObjectURL()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的调用十分奇妙。此方法创建了一个简单的网址字符串，该字符串可用于 DOM <code>File</code> 或 <code>Blob</code> 对象中存储的参考数据。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>blob<span class="token operator">:</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">/</span>c745ef73<span class="token operator">-</span>ece9<span class="token operator">-</span><span class="token number">46</span>da<span class="token operator">-</span><span class="token number">8</span>f66<span class="token operator">-</span>ebes574789b1
</code></pre></div><p>Blob 网址是唯一的，且只要应用存在，该网址就会一直有效（例如直到卸载 <code>document</code> 为止）。如果您要创建很多 Blob 网址，最好发布不再需要的参考资料。您可以通过将 Blob 网址传递给 <a href="http://dev.w3.org/2006/webapi/FileAPI/#dfn-revokeObjectURL" target="_blank" rel="noopener noreferrer"><code>window.URL.revokeObjectURL()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来明确发布该网址：</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>blobURL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window.webkitURL.createObjectURL() in Chrome 10+.</span>
</code></pre></div><p>在 Chrome 浏览器中，有一个很实用的页面可供您查看创建的所有 Blob 网址：<code>chrome://blob-internals/</code>。</p> <h3 id="完整示例"><a href="#完整示例" class="header-anchor">#</a> 完整示例</h3> <p>再进行一个步骤，我们就会清楚如何将 Worker 的 JavaScript 代码内嵌在网页中了。此技术使用 <code>&lt;script&gt;</code> 标签定义 Worker：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>worker1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript/worker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// This script won't be parsed by JS engines because its type is javascript/worker.</span>
    self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'msg from worker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// Rest of your worker code goes here.</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Use a fragment: browser will only render/reflow once.</span>
      <span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'br'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlobBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#worker1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Note: window.webkitURL.createObjectURL() in Chrome 10+.</span>
    <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>bb<span class="token punctuation">.</span><span class="token function">getBlob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Received: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Start the worker.</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在我看来，这种新方法稍显清晰明了。它通过 id=&quot;worker1&quot; 和 type='javascript/worker' 定义脚本标记（这样浏览器就不会解析 JavaScript 了）。系统会使用 <code>document.querySelector('#worker1').textContent</code> 以字符串形式提取该代码并将其传递给 <code>BlobBu lder.append()</code>。</p> <h3 id="加载外部脚本-2"><a href="#加载外部脚本-2" class="header-anchor">#</a> 加载外部脚本</h3> <p>在使用这些技术内嵌 Worker 代码时，<code>importScripts()</code> 只会在您提供绝对 URI 的情况下生效。如果您尝试传递相对 URI，浏览器就会提示出现安全错误。原因：系统会通过 <code>blob:</code> 前缀解析 Worker（现在通过 Blob 网址创建），而您的应用会通过其他（可能为 <code>http://</code>）方案运行。因此，失败原因在于跨源限制。</p> <p>在内嵌 Worker 中利用 <code>importScripts()</code> 的一种方法是，通过将相关网址传递给内嵌 Worker 并手动构建绝对网址来“导入”运行您主脚本的当前网址。这可以确保外部脚本是从同一来源导入的。假设您的主应用是在 http://example.com/index.html 上运行的：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>worker2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript/worker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> url <span class="token operator">=</span> data<span class="token punctuation">.</span>url<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      url <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">importScripts</span><span class="token punctuation">(</span>url <span class="token operator">+</span> <span class="token string">'engine.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>bb<span class="token punctuation">.</span><span class="token function">getBlob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token operator">:</span> document<span class="token punctuation">.</span>location<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="处理错误"><a href="#处理错误" class="header-anchor">#</a> 处理错误</h2> <p>与任何 JavaScript 逻辑一样，您需要处理 Web Worker 中出现的任何错误。如果在执行 Worker 时出现错误，就会触发 <code>ErrorEvent</code>。相关界面中包含用于找出错误内容的三个实用属性：<code>filename</code> - 导致错误的 Worker 脚本的名称；<code>lineno</code> - 出现错误的行号；以及 <code>message</code> - 有关错误的实用说明。以下示例设置了 <code>onerror</code> 事件处理程序以便打印错误内容：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>output</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>output</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>output</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>output</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token string">'ERROR: Line '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>lineno<span class="token punctuation">,</span> <span class="token string">' in '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> <span class="token string">': '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>message<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onMsg</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'workerWithError.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> onMsg<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> onError<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Start worker without a message.</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>示例</strong>：workerWithError.js 尝试执行 1/x，其中 x 未定义。</p> <p>运行</p> <p>workerWithError.js：</p> <div class="language-html extra-class"><pre class="language-html"><code>self.addEventListener('message', function(e) {
  postMessage(1/x); // Intentional error.
};
</code></pre></div><h2 id="安全说明"><a href="#安全说明" class="header-anchor">#</a> 安全说明</h2> <h3 id="本地访问限制"><a href="#本地访问限制" class="header-anchor">#</a> 本地访问限制</h3> <p>由于 Google Chrome 浏览器的安全限制，Worker 无法在最新版浏览器中本地运行（例如通过 <code>file://</code>），且会在不显示任何提示的情况下失败！要通过 <code>file://</code> 方案运行您的应用，请使用 <code>--allow-file-access-from-files</code> 标记设置来运行 Chrome 浏览器。<strong>请注意</strong>：不推荐使用此标记设置来运行您的主浏览器。此标记设置仅供测试用，请勿用于常规浏览。</p> <p>其他浏览器不存在相同的限制。</p> <h3 id="同源注意事项"><a href="#同源注意事项" class="header-anchor">#</a> 同源注意事项</h3> <p>Worker 脚本必须是将相同方案作为调用网页的外部文件。因此，您无法通过 <code>data:</code> 网址或 <code>javascript:</code> 网址加载脚本，且 <code>https:</code> 网页无法启动以 <code>http:</code> 网址开头的 Worker 脚本。</p> <h2 id="用例"><a href="#用例" class="header-anchor">#</a> 用例</h2> <p>那么，哪种应用可以利用 Web Worker 呢？很遗憾，Web Worker 仍相对较新，且已有的示例/教程中大部分都会涉及素数的计算。虽然这没什么趣味性，但却可以帮助您理解 Web Worker 的概念。下面列出了更多概念供您活跃思维：</p> <ul><li>预先抓取和/或缓存数据以便稍后使用</li> <li>突出显示代码语法或其他实时文本格式</li> <li>拼写检查程序</li> <li>分析视频或音频数据</li> <li>背景 I/O 或网络服务轮询</li> <li>处理较大数组或超大 JSON 响应</li> <li><code>&lt;canvas&gt;</code> 中的图片过滤</li> <li>更新本地网络数据库中的多行内容</li></ul> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="http://www.whatwg.org/specs/web-workers/current-work/" target="_blank" rel="noopener noreferrer">Web Worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 规范</li> <li>来自 Mozilla 开发人员网络的 <a href="http://developer.mozilla.org/en/Using_web_workers" target="_blank" rel="noopener noreferrer">“使用 Web Worker”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>来自 Dev.Opera 的<a href="http://dev.opera.com/articles/view/web-workers-rise-up/" target="_blank" rel="noopener noreferrer">“Web Worker 潮流！”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/WebAPI/Node/Node.html" class="prev">
            WebAPI-Node接口
          </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#问题-javascript-并行性" class="sidebar-link reco-side-问题-javascript-并行性" data-v-70334359>问题：JavaScript 并行性</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#web-worker-简介-为-javascript-引入线程技术" class="sidebar-link reco-side-web-worker-简介-为-javascript-引入线程技术" data-v-70334359>Web Worker 简介：为 JavaScript 引入线程技术</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#web-worker-的类型" class="sidebar-link reco-side-web-worker-的类型" data-v-70334359>Web Worker 的类型</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#使用入门" class="sidebar-link reco-side-使用入门" data-v-70334359>使用入门</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#通过消息传递与-worker-通信" class="sidebar-link reco-side-通过消息传递与-worker-通信" data-v-70334359>通过消息传递与 Worker 通信</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#worker-环境" class="sidebar-link reco-side-worker-环境" data-v-70334359>Worker 环境</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#worker-作用域" class="sidebar-link reco-side-worker-作用域" data-v-70334359>Worker 作用域</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#适用于-worker-的功能" class="sidebar-link reco-side-适用于-worker-的功能" data-v-70334359>适用于 Worker 的功能</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#加载外部脚本" class="sidebar-link reco-side-加载外部脚本" data-v-70334359>加载外部脚本</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#子-worker" class="sidebar-link reco-side-子-worker" data-v-70334359>子 Worker</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#内嵌-worker" class="sidebar-link reco-side-内嵌-worker" data-v-70334359>内嵌 Worker</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#blob-网址" class="sidebar-link reco-side-blob-网址" data-v-70334359>Blob 网址</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#完整示例" class="sidebar-link reco-side-完整示例" data-v-70334359>完整示例</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#加载外部脚本-2" class="sidebar-link reco-side-加载外部脚本-2" data-v-70334359>加载外部脚本</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#处理错误" class="sidebar-link reco-side-处理错误" data-v-70334359>处理错误</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#安全说明" class="sidebar-link reco-side-安全说明" data-v-70334359>安全说明</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#本地访问限制" class="sidebar-link reco-side-本地访问限制" data-v-70334359>本地访问限制</a></li><li class="level-3" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#同源注意事项" class="sidebar-link reco-side-同源注意事项" data-v-70334359>同源注意事项</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#用例" class="sidebar-link reco-side-用例" data-v-70334359>用例</a></li><li class="level-2" data-v-70334359><a href="/WebAPI/Worker/postMessage.html#参考资料" class="sidebar-link reco-side-参考资料" data-v-70334359>参考资料</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.f94c0032.js" defer></script><script src="/assets/js/3.cb1bd57e.js" defer></script><script src="/assets/js/1.76b43f87.js" defer></script><script src="/assets/js/469.910c8a4e.js" defer></script>
  </body>
</html>
