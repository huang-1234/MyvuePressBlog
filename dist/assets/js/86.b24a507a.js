(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{307:function(t,e,a){"use strict";function r(t,e,a,r,n,s,o,i){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),r&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=i?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}a.d(e,"a",(function(){return r}))},445:function(t,e,a){"use strict";a.r(e);var r=a(307),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"babel-plugin-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-import"}},[t._v("#")]),t._v(" babel-plugin-import")]),t._v(" "),a("p",[t._v("在 Babel 配置中引入该插件，可以针对 "),a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design",target:"_blank",rel:"noopener noreferrer"}},[t._v("antd"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design-mobile",target:"_blank",rel:"noopener noreferrer"}},[t._v("antd-mobile"),a("OutboundLink")],1),t._v(", lodash, "),a("a",{attrs:{href:"https://links.jianshu.com/go?to=http%3A%2F%2Fmaterial-ui.com%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("material-ui"),a("OutboundLink")],1),t._v("等库进行按需加载.")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"为什么需要-babel-plugin-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要-babel-plugin-import"}},[t._v("#")]),t._v(" 为什么需要 babel-plugin-import")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fant.design%2Fdocs%2Freact%2Fgetting-started%23Import-on-Demand",target:"_blank",rel:"noopener noreferrer"}},[t._v("English Instruction"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fant.design%2Fdocs%2Freact%2Fgetting-started-cn%23%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文说明"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"如何在项目中添加-babel-plugin-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何在项目中添加-babel-plugin-import"}},[t._v("#")]),t._v(" 如何在项目中添加 babel-plugin-import")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fusage%2Fbabelrc%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("babelrc"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fbabel%2Fbabel-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-loader"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),a("h4",{attrs:{id:"libraryname-antd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#libraryname-antd"}},[t._v("#")]),t._v(" "),a("code",[t._v('{ "libraryName": "antd" }')])]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { Button } from 'antd';\nReactDOM.render(<Button>xxxx</Button>);\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nvar _button = require('antd/lib/button');\nReactDOM.render(<_button>xxxx</_button>);\n")])])]),a("h4",{attrs:{id:"libraryname-antd-style-css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#libraryname-antd-style-css"}},[t._v("#")]),t._v(" "),a("code",[t._v('{ "libraryName": "antd", style: "css" }')])]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { Button } from 'antd';\nReactDOM.render(<Button>xxxx</Button>);\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nvar _button = require('antd/lib/button');\nrequire('antd/lib/button/style/css');\nReactDOM.render(<_button>xxxx</_button>);\n")])])]),a("h4",{attrs:{id:"libraryname-antd-style-true"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#libraryname-antd-style-true"}},[t._v("#")]),t._v(" "),a("code",[t._v('{ "libraryName": "antd", style: true }')])]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { Button } from 'antd';\nReactDOM.render(<Button>xxxx</Button>);\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nvar _button = require('antd/lib/button');\nrequire('antd/lib/button/style');\nReactDOM.render(<_button>xxxx</_button>);\n")])])]),a("p",[t._v("备注 : 配置 "),a("code",[t._v("style: true")]),t._v(" 则在项目编译阶段，可以对引入的 antd 样式文件进行编译，从而可以压缩打包尺寸；而配置"),a("code",[t._v('style: "css"')]),t._v(", 则直接引入经过打包后的 antd 样式文件")]),t._v(" "),a("h2",{attrs:{id:"使用方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[t._v("#")]),t._v(" 使用方式")]),t._v(" "),a("div",{staticClass:"language-source-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install babel-plugin-import --save-dev\n")])])]),a("p",[t._v("通过 "),a("code",[t._v(".babelrc")]),t._v(" 配置文件或者 babel-loader 模块编程引入.")]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "plugins": [["import", options]]\n}\n')])])]),a("h3",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" options")]),t._v(" "),a("p",[a("code",[t._v("options")]),t._v(" can be object.")]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "libraryName": "antd",\n  "style": true,   // or \'css\'\n}\n')])])]),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "libraryName": "lodash",\n  "libraryDirectory": "", //表示从库的package.json的main入口；否则默认为lib文件夹\n  "camel2DashComponentName": false,  // default: true，将引入的组件名转化为"-"连接的文件名\n}\n')])])]),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "libraryName": "@material-ui/core",\n  "libraryDirectory": "components",  // default: lib\n  "camel2DashComponentName": false,  // default: true\n}\n')])])]),a("p",[a("s",[a("code",[t._v("options")]),t._v(" can be an array.")]),t._v(" It's not available in babel@7+")]),t._v(" "),a("p",[t._v("For Example:")]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[\n  {\n    libraryName: 'antd',\n    libraryDirectory: 'lib', // default: lib\n    style: true\n  },\n  {\n    libraryName: 'antd-mobile'\n  }\n];\n")])])]),a("p",[a("code",[t._v("Options")]),t._v(" can't be an array in babel@7+, but you can add plugins with name to support multiple dependencies.")]),t._v(" "),a("p",[t._v("For Example:")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// .babelrc\n"plugins": [\n  ["import", { "libraryName": "antd", "libraryDirectory": "lib"}, "ant"],\n  ["import", { "libraryName": "antd-mobile", "libraryDirectory": "lib"}, "antd-mobile"]\n]\n')])])]),a("h4",{attrs:{id:"style"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#style"}},[t._v("#")]),t._v(" style")]),t._v(" "),a("ul",[a("li",[a("code",[t._v('["import", { "libraryName": "antd" }]')]),t._v(": import js modularly")]),t._v(" "),a("li",[a("code",[t._v('["import", { "libraryName": "antd", "style": true }]')]),t._v(": import js and css modularly (LESS/Sass source files)")]),t._v(" "),a("li",[a("code",[t._v('["import", { "libraryName": "antd", "style": "css" }]')]),t._v(": import js and css modularly (css built files)")])]),t._v(" "),a("p",[t._v("If option style is a "),a("code",[t._v("Function")]),t._v(", "),a("code",[t._v("babel-plugin-import")]),t._v(" will auto import the file which filepath equal to the function return value. This is useful for the components library developers.")]),t._v(" "),a("p",[t._v("e.g.")]),t._v(" "),a("ul",[a("li",[a("code",[t._v('["import", { "libraryName": "antd", "style": (name) =>')]),t._v("${name}/style/2x"),a("code",[t._v("}]")]),t._v(": import js and css modularly & css file path is "),a("code",[t._v("ComponentName/style/2x")])])]),t._v(" "),a("p",[t._v("If a component has no style, you can use the "),a("code",[t._v("style")]),t._v(" function to return a "),a("code",[t._v("false")]),t._v(" and the style will be ignored.")]),t._v(" "),a("p",[t._v("e.g.")]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[\n  'import',\n  {\n    libraryName: 'antd',\n    style: (name: string, file: Object) => {\n      if (name === 'antd/lib/utils') {\n        return false;\n      }\n      return `${name}/style/2x`;\n    }\n  }\n];\n")])])]),a("h4",{attrs:{id:"customname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#customname"}},[t._v("#")]),t._v(" customName")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("customName")]),t._v(" 来自定义导入文件路径.")]),t._v(" "),a("p",[t._v('插件默认导入文件的基础路径为 lib 目录，并且默认将引入的组件名转换为按照"-"连接的结构:')]),t._v(" "),a("div",{staticClass:"language-source-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { TimePicker } from \"antd\"\n↓ ↓ ↓ ↓ ↓ ↓\nvar _button = require('antd/lib/time-picker');\n")])])]),a("p",[t._v("设置 "),a("code",[t._v("camel2DashComponentName")]),t._v(" 为 "),a("code",[t._v("false")]),t._v("来阻止组件名称的转换:")]),t._v(" "),a("div",{staticClass:"language-source-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { TimePicker } from \"antd\"\n↓ ↓ ↓ ↓ ↓ ↓\nvar _button = require('antd/lib/TimePicker');\n")])])]),a("p",[t._v("在 Babel 配置文件中，使用 "),a("code",[t._v("customName")]),t._v(" 来自定义导入组件路径:")]),t._v(" "),a("div",{staticClass:"language-source-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[\n  'import',\n  {\n    libraryName: 'antd',\n    customName: (name: string) => {\n      if (name === 'TimePicker') {\n        return 'antd/lib/custom-time-picker';\n      }\n      return `antd/lib/${name}`;\n    }\n  }\n];\n")])])]),a("p",[t._v("上面编译后的结果为:")]),t._v(" "),a("div",{staticClass:"language-source-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import { TimePicker } from \"antd\"\n↓ ↓ ↓ ↓ ↓ ↓\nvar _button = require('antd/lib/custom-time-picker');\n")])])]),a("h4",{attrs:{id:"transformtodefaultimport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transformtodefaultimport"}},[t._v("#")]),t._v(" transformToDefaultImport")]),t._v(" "),a("p",[t._v("如果打包后的模块没有"),a("code",[t._v("default")]),t._v("导出，则设置 "),a("code",[t._v("false")])]),t._v(" "),a("h3",{attrs:{id:"备注"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备注"}},[t._v("#")]),t._v(" 备注")]),t._v(" "),a("p",[t._v("babel-plugin-import will not work properly if you add the library to the webpack config "),a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fwebpack.github.io%2Fdocs%2Fcode-splitting.html%23split-app-and-vendor-code",target:"_blank",rel:"noopener noreferrer"}},[t._v("vendor"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fswift.ctolib.com%2Farticle%2Fwiki%2F108814",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://swift.ctolib.com/article/wiki/108814"),a("OutboundLink")],1)]),t._v(" "),a("h1",{attrs:{id:"babel-plugin-import-custom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-import-custom"}},[t._v("#")]),t._v(" babel-plugin-import-custom")]),t._v(" "),a("p",[t._v("针对iview做了额外的优化，"),a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fvidering%2Fbabel-plugin-import-custom%2Fblob%2Fmaster%2FREADME.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/videring/babel-plugin-import-custom/blob/master/README.md"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);