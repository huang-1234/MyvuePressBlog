(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{520:function(t,a,e){"use strict";e.r(a);var s=e(45),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"babel-plugin-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-import"}},[t._v("#")]),t._v(" babel-plugin-import")]),t._v(" "),e("p",[t._v("在 Babel 配置中引入该插件，可以针对 "),e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design",target:"_blank",rel:"noopener noreferrer"}},[t._v("antd"),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design-mobile",target:"_blank",rel:"noopener noreferrer"}},[t._v("antd-mobile"),e("OutboundLink")],1),t._v(", lodash, "),e("a",{attrs:{href:"https://links.jianshu.com/go?to=http%3A%2F%2Fmaterial-ui.com%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("material-ui"),e("OutboundLink")],1),t._v("等库进行按需加载.")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"为什么需要-babel-plugin-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要-babel-plugin-import"}},[t._v("#")]),t._v(" 为什么需要 babel-plugin-import")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fant.design%2Fdocs%2Freact%2Fgetting-started%23Import-on-Demand",target:"_blank",rel:"noopener noreferrer"}},[t._v("English Instruction"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fant.design%2Fdocs%2Freact%2Fgetting-started-cn%23%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文说明"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"如何在项目中添加-babel-plugin-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何在项目中添加-babel-plugin-import"}},[t._v("#")]),t._v(" 如何在项目中添加 babel-plugin-import")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fusage%2Fbabelrc%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("babelrc"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fbabel%2Fbabel-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-loader"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),e("h4",{attrs:{id:"libraryname-antd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#libraryname-antd"}},[t._v("#")]),t._v(" "),e("code",[t._v('{ "libraryName": "antd" }')])]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { Button } from 'antd';\nReactDOM.render(<Button>xxxx</Button>);\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nvar _button = require('antd/lib/button');\nReactDOM.render(<_button>xxxx</_button>);\n")])])]),e("h4",{attrs:{id:"libraryname-antd-style-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#libraryname-antd-style-css"}},[t._v("#")]),t._v(" "),e("code",[t._v('{ "libraryName": "antd", style: "css" }')])]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { Button } from 'antd';\nReactDOM.render(<Button>xxxx</Button>);\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nvar _button = require('antd/lib/button');\nrequire('antd/lib/button/style/css');\nReactDOM.render(<_button>xxxx</_button>);\n")])])]),e("h4",{attrs:{id:"libraryname-antd-style-true"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#libraryname-antd-style-true"}},[t._v("#")]),t._v(" "),e("code",[t._v('{ "libraryName": "antd", style: true }')])]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { Button } from 'antd';\nReactDOM.render(<Button>xxxx</Button>);\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nvar _button = require('antd/lib/button');\nrequire('antd/lib/button/style');\nReactDOM.render(<_button>xxxx</_button>);\n")])])]),e("p",[t._v("备注 : 配置 "),e("code",[t._v("style: true")]),t._v(" 则在项目编译阶段，可以对引入的 antd 样式文件进行编译，从而可以压缩打包尺寸；而配置"),e("code",[t._v('style: "css"')]),t._v(", 则直接引入经过打包后的 antd 样式文件")]),t._v(" "),e("h2",{attrs:{id:"使用方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[t._v("#")]),t._v(" 使用方式")]),t._v(" "),e("div",{staticClass:"language-source-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm install babel-plugin-import --save-dev\n")])])]),e("p",[t._v("通过 "),e("code",[t._v(".babelrc")]),t._v(" 配置文件或者 babel-loader 模块编程引入.")]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  "plugins": [["import", options]]\n}\n')])])]),e("h3",{attrs:{id:"options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" options")]),t._v(" "),e("p",[e("code",[t._v("options")]),t._v(" can be object.")]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  "libraryName": "antd",\n  "style": true,   // or \'css\'\n}\n')])])]),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  "libraryName": "lodash",\n  "libraryDirectory": "", //表示从库的package.json的main入口；否则默认为lib文件夹\n  "camel2DashComponentName": false,  // default: true，将引入的组件名转化为"-"连接的文件名\n}\n')])])]),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  "libraryName": "@material-ui/core",\n  "libraryDirectory": "components",  // default: lib\n  "camel2DashComponentName": false,  // default: true\n}\n')])])]),e("p",[e("s",[e("code",[t._v("options")]),t._v(" can be an array.")]),t._v(" It's not available in babel@7+")]),t._v(" "),e("p",[t._v("For Example:")]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[\n  {\n    libraryName: 'antd',\n    libraryDirectory: 'lib', // default: lib\n    style: true\n  },\n  {\n    libraryName: 'antd-mobile'\n  }\n];\n")])])]),e("p",[e("code",[t._v("Options")]),t._v(" can't be an array in babel@7+, but you can add plugins with name to support multiple dependencies.")]),t._v(" "),e("p",[t._v("For Example:")]),t._v(" "),e("div",{staticClass:"language-csharp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-csharp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .babelrc")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugins"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"import"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryName"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"antd"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryDirectory"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ant"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"import"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryName"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"antd-mobile"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryDirectory"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"antd-mobile"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("h4",{attrs:{id:"style"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#style"}},[t._v("#")]),t._v(" style")]),t._v(" "),e("ul",[e("li",[e("code",[t._v('["import", { "libraryName": "antd" }]')]),t._v(": import js modularly")]),t._v(" "),e("li",[e("code",[t._v('["import", { "libraryName": "antd", "style": true }]')]),t._v(": import js and css modularly (LESS/Sass source files)")]),t._v(" "),e("li",[e("code",[t._v('["import", { "libraryName": "antd", "style": "css" }]')]),t._v(": import js and css modularly (css built files)")])]),t._v(" "),e("p",[t._v("If option style is a "),e("code",[t._v("Function")]),t._v(", "),e("code",[t._v("babel-plugin-import")]),t._v(" will auto import the file which filepath equal to the function return value. This is useful for the components library developers.")]),t._v(" "),e("p",[t._v("e.g.")]),t._v(" "),e("ul",[e("li",[e("code",[t._v('["import", { "libraryName": "antd", "style": (name) =>')]),t._v("${name}/style/2x"),e("code",[t._v("}]")]),t._v(": import js and css modularly & css file path is "),e("code",[t._v("ComponentName/style/2x")])])]),t._v(" "),e("p",[t._v("If a component has no style, you can use the "),e("code",[t._v("style")]),t._v(" function to return a "),e("code",[t._v("false")]),t._v(" and the style will be ignored.")]),t._v(" "),e("p",[t._v("e.g.")]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[\n  'import',\n  {\n    libraryName: 'antd',\n    style: (name: string, file: Object) => {\n      if (name === 'antd/lib/utils') {\n        return false;\n      }\n      return `${name}/style/2x`;\n    }\n  }\n];\n")])])]),e("h4",{attrs:{id:"customname"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#customname"}},[t._v("#")]),t._v(" customName")]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("customName")]),t._v(" 来自定义导入文件路径.")]),t._v(" "),e("p",[t._v('插件默认导入文件的基础路径为 lib 目录，并且默认将引入的组件名转换为按照"-"连接的结构:')]),t._v(" "),e("div",{staticClass:"language-source-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { TimePicker } from \"antd\"\n↓ ↓ ↓ ↓ ↓ ↓\nvar _button = require('antd/lib/time-picker');\n")])])]),e("p",[t._v("设置 "),e("code",[t._v("camel2DashComponentName")]),t._v(" 为 "),e("code",[t._v("false")]),t._v("来阻止组件名称的转换:")]),t._v(" "),e("div",{staticClass:"language-source-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { TimePicker } from \"antd\"\n↓ ↓ ↓ ↓ ↓ ↓\nvar _button = require('antd/lib/TimePicker');\n")])])]),e("p",[t._v("在 Babel 配置文件中，使用 "),e("code",[t._v("customName")]),t._v(" 来自定义导入组件路径:")]),t._v(" "),e("div",{staticClass:"language-source-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[\n  'import',\n  {\n    libraryName: 'antd',\n    customName: (name: string) => {\n      if (name === 'TimePicker') {\n        return 'antd/lib/custom-time-picker';\n      }\n      return `antd/lib/${name}`;\n    }\n  }\n];\n")])])]),e("p",[t._v("上面编译后的结果为:")]),t._v(" "),e("div",{staticClass:"language-source-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { TimePicker } from \"antd\"\n↓ ↓ ↓ ↓ ↓ ↓\nvar _button = require('antd/lib/custom-time-picker');\n")])])]),e("h4",{attrs:{id:"transformtodefaultimport"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transformtodefaultimport"}},[t._v("#")]),t._v(" transformToDefaultImport")]),t._v(" "),e("p",[t._v("如果打包后的模块没有"),e("code",[t._v("default")]),t._v("导出，则设置 "),e("code",[t._v("false")])]),t._v(" "),e("h3",{attrs:{id:"备注"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#备注"}},[t._v("#")]),t._v(" 备注")]),t._v(" "),e("p",[t._v("babel-plugin-import will not work properly if you add the library to the webpack config "),e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fwebpack.github.io%2Fdocs%2Fcode-splitting.html%23split-app-and-vendor-code",target:"_blank",rel:"noopener noreferrer"}},[t._v("vendor"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fswift.ctolib.com%2Farticle%2Fwiki%2F108814",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://swift.ctolib.com/article/wiki/108814"),e("OutboundLink")],1)]),t._v(" "),e("h1",{attrs:{id:"babel-plugin-import-custom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugin-import-custom"}},[t._v("#")]),t._v(" babel-plugin-import-custom")]),t._v(" "),e("p",[t._v("针对iview做了额外的优化，"),e("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fvidering%2Fbabel-plugin-import-custom%2Fblob%2Fmaster%2FREADME.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/videring/babel-plugin-import-custom/blob/master/README.md"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);