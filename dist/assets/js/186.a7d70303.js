(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{699:function(a,e,t){"use strict";t.r(e);var r=t(6),n=Object(r.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"yarn-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-config"}},[a._v("#")]),a._v(" yarn config")]),a._v(" "),t("h2",{attrs:{id:"yarn-cache之坑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-cache之坑"}},[a._v("#")]),a._v(" Yarn cache之坑")]),a._v(" "),t("p",[a._v("迫于电脑C盘只是128G的固态，虽然还有1个T的机械空间，但完全没用呀😭。眼看C盘越来越小，没办法开始网上各种搜索，优化C盘的办法。")]),a._v(" "),t("p",[a._v("首先是发现了TreeSize神器，这个能直接看到每个盘下面文件夹的大小，真的是一目了然，强烈推荐。")]),a._v(" "),t("p",[a._v("这个时候就发现了Yarn会在C盘个人目录下面缓存大量的包，发现的时候已经6个G了😭。")]),a._v(" "),t("p",[a._v("下面就介绍一下Yarn提供的几个缓存命令：")]),a._v(" "),t("h3",{attrs:{id:"一、yarn-cache-dir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、yarn-cache-dir"}},[a._v("#")]),a._v(" 一、yarn cache dir")]),a._v(" "),t("p",[a._v("运行这个命令会显示出当前缓存目录，默认为C盘。例如我电脑的为")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("***"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("AppData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Local"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Yarn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("v4\n")])])]),t("h3",{attrs:{id:"二、yarn-cache-clean-module-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、yarn-cache-clean-module-name"}},[a._v("#")]),a._v(" 二、yarn cache clean [<module_name…>]")]),a._v(" "),t("p",[a._v("运行这个命令会清理缓存包，如果没有指定包名则会全部清理，指定了就清理相关包。\n不过要注意，要先清理然后再配置目录，可能会因为配置完目之后，导致之前缓存下来的没法删除。")]),a._v(" "),t("h3",{attrs:{id:"三、yarn-config-set-cache-folder"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、yarn-config-set-cache-folder"}},[a._v("#")]),a._v(" 三、yarn config set cache-folder")]),a._v(" "),t("p",[a._v("设置当前缓存目录，例如我指定了缓存目录：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" cache-folder G:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("YarnCache\n")])])]),t("p",[a._v("运行完当然可以再次运行yarn cache dir，来检查下是否配置成功，当然也可以找一个项目运行yarn install来试下。")]),a._v(" "),t("h3",{attrs:{id:"四、同样的道理npm也会在用户目录下面缓存大量的文件-不过比yarn少了很多-只有1个g左右。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、同样的道理npm也会在用户目录下面缓存大量的文件-不过比yarn少了很多-只有1个g左右。"}},[a._v("#")]),a._v(" 四、同样的道理npm也会在用户目录下面缓存大量的文件，不过比yarn少了很多，只有1个G左右。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('npm config get cache\nnpm cache clean --force\nnpm config set cache "D:\\ProgramFile\\nodejs\\node_modules\\node_cache"\nnpm cache verify：验证清理的有效性\n')])])]),t("h3",{attrs:{id:"五、另外一些清理c盘的发现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、另外一些清理c盘的发现"}},[a._v("#")]),a._v(" 五、另外一些清理C盘的发现")]),a._v(" "),t("ol",[t("li",[a._v("IntellJ以及基于它开发的Webstrom、AndroidStudio也会在个人目录下面缓存大量的配置文件，1-2个G了，所以JetBrains全家桶可以考虑只装一个IntellJ，其他webstrom、pycharm等可以考虑安装插件。")]),a._v(" "),t("li",[a._v("window10系统更新完，会在C盘有一个windows.old目录，这个如果系统更新完没有啥问题，过段时间也是可以删除的。")])]),a._v(" "),t("h2",{attrs:{id:"yarn-yarn-lock文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-yarn-lock文件"}},[a._v("#")]),a._v(" Yarn yarn.lock文件")]),a._v(" "),t("p",[a._v("为了在多台机器之间获得一致的安装结果，Yarn 可能会需要比 "),t("code",[a._v("package.json")]),a._v(" 文件中配置的依赖项更多的信息。它需要准确存储每一个依赖项的安装版本。因此在 Yarn 项目的根目录我们需要一个 "),t("code",[a._v("yarn.lock")]),a._v(" 文件，这个 "),t("code",[a._v("yarn.lock")]),a._v(" 文件是自动生成的。")]),a._v(" "),t("p",[a._v("当我们执行 "),t("code",[a._v("yarn")]),a._v(" 命令或者添加依赖包命令后，Yarn 都会在项目根目录下自动生成一个 "),t("code",[a._v("yarn.lock")]),a._v(" 文件。在使用 Yarn 安装、升级、删除依赖项目时，会自动更新到 "),t("code",[a._v("yarn.lock")]),a._v(" 文件中。一般我们不会去手动编辑这个文件，因为很容易破坏这个文件。")]),a._v(" "),t("h5",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[a._v("#")]),a._v(" 示例：")]),a._v(" "),t("p",[a._v("例如我们安装了一些依赖包，那么 "),t("code",[a._v("yarn.lock")]),a._v(" 文件内容类似所示格式：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('copy-descriptor@^0.1.0:\n  version "0.1.1"\n  resolved "https://registry.yarnpkg.com/copy-descriptor/-/copy-descriptor-0.1.1.tgz#676f6eb3c39997c2ee1ac3a924fd6124748f578d"\n  integrity sha1-Z29us8OZl8LuGsOpJP1hJHSPV40=\n\ncore-util-is@~1.0.0:\n  version "1.0.2"\n  resolved "https://registry.yarnpkg.com/core-util-is/-/core-util-is-1.0.2.tgz#b5fd54220aa2bc5ab57aab7140c940754503c1a7"\n  integrity sha1-tf1UIgqivFq1eqtxQMlAdUUDwac=\n\ncreate-ecdh@^4.0.0:\n  version "4.0.3"\n  resolved "https://registry.yarnpkg.com/create-ecdh/-/create-ecdh-4.0.3.tgz#c9111b6f33045c4697f144787f9254cdc77c45ff"\n  integrity sha512-GbEHQPMOswGpKXM9kCWVrremUcBmjteUaQ01T9rkKCPDXfUHX0IoP9LpHYo2NPFampa4e+/pFDc3jQdxrxQLaw==\n  dependencies:\n    bn.js "^4.1.0"\n    elliptic "^6.0.0"\n')])])]),t("p",[a._v("可以明显看到 "),t("code",[a._v("yarn.lock")]),a._v(" 文件中的信息比 "),t("code",[a._v("package.json")]),a._v(" 文件中详细了很多。")]),a._v(" "),t("p",[a._v("在实际项目中，"),t("code",[a._v("yarn.lock")]),a._v(" 文件也很有用处，我们可以将 "),t("code",[a._v("yarn.lock")]),a._v(" 提交到版本库中，其他成员就可以通过 "),t("code",[a._v("yarn install")]),a._v("获取所有依赖包，这个可以保证大家安装的依赖是完全一致的，避免产生 "),t("code",[a._v("bug")]),a._v("。")])])}),[],!1,null,null,null);e.default=n.exports}}]);